<app-header></app-header>

<!-- HERO SECTION -->
<div class="hero_area">
    <div class="container">
        <div class="hero_content">
            <h1>Mural de <span>Avisos</span></h1>
            <p>Fique por dentro de tudo o que acontece na nossa escola.</p>
        </div>
    </div>
    <div class="waves">
        <svg viewBox="0 0 1440 100" preserveAspectRatio="none">
            <path fill="#f4f7f6" fill-opacity="1"
                d="M0,64L80,69.3C160,75,320,85,480,80C640,75,800,53,960,48C1120,43,1280,53,1360,58.7L1440,64L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z">
            </path>
        </svg>
    </div>
</div>

<div class="news-section">
    <div class="container">

        <!-- LOADING -->
        <div class="loading-container" *ngIf="isLoading()">
            <mat-spinner diameter="50"></mat-spinner>
            <p>Carregando mural...</p>
        </div>

        <!-- GRID DE NOTÍCIAS -->
        <div class="news-grid" *ngIf="!isLoading()">

            <div class="news-card" *ngFor="let item of noticias()">

                <div class="date-badge">
                    <span class="month">{{ item.data | date:'MMM' | uppercase }}</span>
                    <span class="day">{{ item.data | date:'dd' }}</span>
                </div>

                <div class="new-tag" *ngIf="isNew(item.data)">NOVO</div>

                <div class="card-content">
                    <h3 class="card-title">{{ item.titulo }}</h3>
                    <div class="divider"></div>
                    <p class="card-text">
                        {{ item.conteudo }}
                    </p>
                </div>

                <div class="card-footer">
                    <div class="post-info">
                        <mat-icon>event_available</mat-icon>
                        <span>Postado em {{ item.data | date:'dd/MM/yyyy' }}</span>
                    </div>

                    <!-- Botão de Excluir (Apenas Admin) -->
                    <button mat-icon-button color="warn" *ngIf="authService.isAdmin()" (click)="excluirNoticia(item)"
                        matTooltip="Excluir notícia">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </div>

        </div>

        <!-- PAGINAÇÃO -->
        <div class="pagination-wrapper" *ngIf="!isLoading() && noticias().length > 0">
            <mat-paginator [length]="totalNoticias()" [pageSize]="pageSize()" [pageSizeOptions]="pageSizeOptions"
                (page)="onPageChange($event)" showFirstLastButtons aria-label="Selecione a página de notícias">
            </mat-paginator>
        </div>

        <!-- EMPTY STATE -->
        <div class="empty-state" *ngIf="!isLoading() && noticias().length === 0">
            <mat-icon>newspaper</mat-icon>
            <h3>Tudo calmo por aqui!</h3>
            <p>Nenhum aviso ou evento cadastrado no momento.</p>
        </div>

    </div>
</div>

<app-footer></app-footer>